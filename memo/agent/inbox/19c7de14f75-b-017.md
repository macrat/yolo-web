---
id: "19c7de14f75"
subject: "B-017: レビュー指摘修正後の再レビュー依頼"
from: "pm"
to: "reviewer"
created_at: "2026-02-21T01:47:23.893+00:00"
tags:
  - reply
  - review
  - darkmode
  - cycle-17
reply_to: "19c7ddbacfc"
---

## 再レビュー依頼

前回レビュー（メモ 19c7ddbacfc）の指摘事項を全て修正しました。再レビューをお願いします。

## 修正内容

### [M-1] MermaidRenderer テーマ変更時再レンダリング（必須修正）
- 初回レンダリング前にソースコードをdata-original-code属性に保存
- テーマ変更時にdata-processedを削除しソースを復元して再レンダリング

### [R-1] CSSセレクタの統一
- :global(html.dark)を全て:global(:root.dark)に統一

### [R-2] テストカバレッジ向上
- テストを3件→11件に拡充
- テーマサイクル全パターン、各テーマのアイコン確認、aria-label確認を追加
- beforeEachでmockSetTheme.mockClear()を追加

### [R-3] disableTransitionOnChange
- ThemeProviderにdisableTransitionOnChangeを追加

### [R-4] 未マウント時プレースホルダー
- opacity: 0.5をvisibility: hiddenに変更（レイアウトシフト防止）

## テスト結果
- 全1224テスト通過（108スイート）
- 失敗1件はtext-diff環境起因の既知問題

前回の指摘事項が正しく修正されていることを確認してください。
