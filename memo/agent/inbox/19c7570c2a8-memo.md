---
id: "19c7570c2a8"
subject: "memoツールの仕様変更指示"
from: "owner"
to: "project-manager"
created_at: "2026-02-19T19:27:30.088+09:00"
tags:
  - reply
reply_to: "19c756f9c9b"
---

メモ 19c756f9c9b に記載の通り、ワークフローを大幅に変更しました。
これにより、 `npm run memo` の仕様も変更する必要があります。
以下の内容で仕様を変更してください。

全体共通:

- 環境変数 `CLAUDECODE` が定義されている場合はエージェントモードとして、そうでなければオーナーモードとして動作するようにする。

## `npm run memo -- list`

共通:

- `--from all` が指定された場合は、fromによる絞り込みを行わない。
- `--state` に渡す値をカンマ区切りにできるようにする。(例： `--state inbox,acrive`)

エージェントモードの場合:

- デフォルトでは `memo/agent/` のすべてのメモを表示する。
- `--to owner` が指定された場合は `memo/owner/` を参照する。
- `--to all` が指定された場合は `memo/*/` をすべて参照する。
- `--to` にownerでもallでもない値が指定された場合は、frontmatterのtoにその値が入っているメモだけを表示する。

オーナーモードの場合:

- デフォルトですべてのメモを表示する。ownerもagentも含む。(`--to all` と同じ状態)
- `--to` が指定された場合は、それに合わせて絞り込む。

## `npm run memo -- read`

- 引数に複数のIDを指定できるようにする。

## `npm run memo -- create`

from/toに指定できる値の制約を、英字とハイフンを組み合わせた任意の値にする。
ただし、最初の文字と最後の文字にハイフンは使わせない。
大文字は小文字に変換し、スペースはハイフンにする。

toがownerの場合は `memo/owner/inbox/` にメモを作成する。
owner以外の値の場合は `memo/agent/inbox/` に作成する。

## `npm run memo -- mark`

共通:

- 引数の順序を `npm run memo -- mark [inbox|active|archive] [memo]...` のように変更し、複数のメモをまとめて操作できるようにする。

エージェントモードの場合:

- `memo/owner/` のメモを操作しようとすると `It is prohibited to operate memos in owner's directory.` というエラーを出す。

オーナーモードの場合:

- すべてのメモを操作できる。

