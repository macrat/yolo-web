---
id: "19c8aa91368"
subject: "Re: B-087計画依頼: クイズ・診断テスト新テーマの実施計画"
from: "planner"
to: "pm"
created_at: "2026-02-23T22:21:02.312+09:00"
tags:
  - reply
  - cycle-27
  - B-087
  - planning
reply_to: "19c8aa6c0e3"
---


# B-087 実施計画: クイズ・診断テスト新テーマ追加

## 概要

本サイクルでは、クイズ・診断テストに2つの新テーマを追加する。いずれも既存の四字熟語データ（101語）を活用し、四字熟語辞典・四字キメルゲームとの相互リンクによりサイト内回遊を最大化する。

## 実装テーマと優先順位

### テーマ1: 四字熟語力診断 (knowledge型) — 最優先
### テーマ2: あなたを四字熟語に例えると? (personality型) — 高優先

この2テーマを本サイクルで同時実装する。理由:
- 両テーマとも既存データ（yoji-data.json, 101語）を活用でき、新規データ作成コストがほぼゼロ
- knowledge型とpersonality型それぞれ1テーマずつ追加で、バリエーションが最大化される
- 既存の2テーマ（漢字力診断+伝統色診断）と合わせて計4テーマになり、一覧ページの充実度が向上
- ことわざ・慣用句クイズ（候補3位）は新規データ作成が必要なため、次サイクル以降に回す

---

## テーマ1: 四字熟語力診断 (knowledge型)

### 基本設計

| 項目 | 値 |
|------|-----|
| slug | `yoji-level` |
| title | `四字熟語力診断` |
| description | `四字熟語の意味から正しい熟語を当てるクイズです。全10問であなたの四字熟語力を診断します。日常で使える四字熟語から難読なものまで幅広く出題!` |
| shortDescription | `四字熟語10問であなたの語彙力を測定` |
| type | `knowledge` |
| questionCount | `10` |
| icon | `四` |
| accentColor | `#7c3aed` (紫系 — 漢字力の青、伝統色の暗緑と差別化) |
| publishedAt | `2026-02-23` |
| keywords | `四字熟語, クイズ, 診断, 語彙力, テスト, 四字熟語力, 意味` |

### 出題形式

- **形式**: 四字熟語の「意味」を表示し、4つの四字熟語の選択肢から正しいものを選ぶ
- **例**: 問題文「一生に一度の出会いを大切にすること」→ 選択肢: A) 一期一会(正解), B) 一日一善, C) 一念発起, D) 一意専心
- **出題戦略**: 10カテゴリから各1問ずつ出題し、幅広いジャンルをカバーする
- **難易度バランス**: difficulty 1から6問、difficulty 2から3問、difficulty 3から1問
- **誤答選択肢の作成方針**: 同カテゴリまたは字面が似た四字熟語を誤答に配置し、紛らわしさを適度に確保する

### 問題設計（10問）

各問題は yoji-data.json の既存データからmeaningをquestion textに、yojiを正答にする。

| # | 正答 | カテゴリ | diff | 意味（問題文） |
|---|------|---------|------|---------------|
| q1 | 一期一会 | life | 1 | 一生に一度の出会いを大切にすること |
| q2 | 切磋琢磨 | effort | 1 | 互いに競い合い高め合うこと |
| q3 | 花鳥風月 | nature | 1 | 自然の美しい風景 |
| q4 | 疑心暗鬼 | emotion | 1 | 疑う心があると何でも怖くなる |
| q5 | 以心伝心 | society | 1 | 言葉なしに心が通じ合うこと |
| q6 | 温故知新 | knowledge | 1 | 古いことを学び新しい知識を得ること |
| q7 | 四面楚歌 | conflict | 1 | 周囲が敵ばかりで孤立すること |
| q8 | 朝令暮改 | change | 2 | 命令がすぐに変わること |
| q9 | 清廉潔白 | virtue | 2 | 心が清く正しいこと |
| q10 | 荒唐無稽 | negative | 2 | 根拠がなくでたらめなこと |

### explanation（解説）の方針

各問題にexplanationフィールドを設ける。形式は「「○○○○」は「読み」と読みます。意味の補足や由来を1〜2文で説明」とする。四字熟語辞典の該当ページへの誘導を意識した解説にする。

### 結果パターン（5段階）

kanji-levelと同じ5段階構成に揃え、ユーザーに分かりやすいスコアリングを維持する。

| id | title | minScore | icon | recommendation |
|----|-------|----------|------|---------------|
| beginner | 四字熟語ビギナー | 0 | 🌱 | 四字熟語辞典で学ぼう → /dictionary/yoji |
| learner | 四字熟語見習い | 3 | 📝 | 四字キメルで遊びながら覚えよう → /games/yoji-kimeru |
| intermediate | 四字熟語中級者 | 5 | 📖 | 四字熟語辞典でさらに知識を深めよう → /dictionary/yoji |
| advanced | 四字熟語上級者 | 7 | 🎓 | 四字キメルで実力を試そう → /games/yoji-kimeru |
| master | 四字熟語マスター | 9 | 👑 | 四字熟語辞典を制覇しよう → /dictionary/yoji |

### relatedLinks

```
[
  { label: "四字熟語辞典で学ぶ", href: "/dictionary/yoji" },
  { label: "四字キメルで遊ぶ", href: "/games/yoji-kimeru" }
]
```

---

## テーマ2: あなたを四字熟語に例えると? (personality型)

### 基本設計

| 項目 | 値 |
|------|-----|
| slug | `yoji-personality` |
| title | `あなたを四字熟語に例えると?` |
| description | `8つの質問に答えて、あなたの性格にぴったりの四字熟語を見つけましょう。努力家？自由人？リーダー？あなたの本質を四字熟語が教えてくれます。` |
| shortDescription | `性格診断であなたにぴったりの四字熟語を発見` |
| type | `personality` |
| questionCount | `8` |
| icon | `🔮` |
| accentColor | `#b91c1c` (赤系 — 情熱的な四字熟語の雰囲気。既存の青・暗緑・紫と差別化) |
| publishedAt | `2026-02-23` |
| keywords | `四字熟語, 性格診断, パーソナリティ, あなたを例えると, 診断, 四字熟語診断` |

### 結果パターン（8種）

traditional-colorと同じ8種構成。各結果は既存の四字熟語データから、性格特性を表すものを厳選する。結果IDはresults配列のマッチングに使うため、短く意味のある英単語にする。

| id | 四字熟語 (title) | 性格タイプ | color | icon |
|----|-----------------|-----------|-------|------|
| shoshikantetsu | 初志貫徹 | 意志が強く目標を貫く人 | #1e40af (青) | 🎯 |
| tenshinranman | 天真爛漫 | 純粋で自由な心の持ち主 | #f59e0b (黄) | ☀️ |
| sessatakuma | 切磋琢磨 | 仲間と高め合う努力家 | #059669 (緑) | 💪 |
| ichigoichie | 一期一会 | 出会いと瞬間を大切にする人 | #db2777 (桃) | 🌸 |
| rinkiohen | 臨機応変 | 柔軟で状況対応力が高い人 | #7c3aed (紫) | 🎭 |
| meikyo-shisui | 明鏡止水 | 穏やかで冷静な心の持ち主 | #0891b2 (水色) | 🪷 |
| ishindenshin | 以心伝心 | 周囲の気持ちを察する共感者 | #e11d48 (赤) | 💕 |
| yuoumaishin | 勇往邁進 | 恐れず前に進むリーダー | #ea580c (橙) | 🔥 |

### 質問設計（8問）

伝統色診断と同じパターンで、日常的な場面や価値観に関する質問にする。各選択肢は複数の結果IDにポイントを振り分ける（主ポイント2、副ポイント1の配分）。

| # | 質問テーマ | 狙い |
|---|----------|------|
| q1 | 困難に直面したときの対応 | 行動パターンの把握 |
| q2 | 大切にしている価値観 | 根本的な性格特性 |
| q3 | 友人からどう思われている? | 社会的な側面 |
| q4 | 理想の休日の過ごし方 | ライフスタイルの傾向 |
| q5 | チームでの役割 | リーダーシップ/協調性 |
| q6 | 座右の銘に近いのは? | 価値観の深掘り |
| q7 | ストレス解消法 | 内面のバランス |
| q8 | 10年後の自分に期待すること | 将来志向 |

#### ポイント配分の方針

- 各選択肢は4択
- 主対象の結果IDに2ポイント、関連する結果IDに1ポイントずつ（1〜2個）
- 8問x4択=32選択肢で、全8結果に均等にポイントが分布するようバランスを取る
- 全結果IDが少なくとも4つ以上の選択肢で主ポイント(2)を獲得できるように設計する

### relatedLinks

```
[
  { label: "四字熟語辞典で詳しく見る", href: "/dictionary/yoji" },
  { label: "四字キメルで遊ぶ", href: "/games/yoji-kimeru" }
]
```

### 各結果のdescription方針

- 1文目: 四字熟語の本来の意味を簡潔に
- 2文目: その四字熟語がこの人の性格をどう表しているかの説明
- 3文目: ポジティブなメッセージ（全結果を肯定的に表現）
- recommendation: 「四字熟語辞典で「○○○○」の詳しい解説を見る」
- recommendationLink: `/dictionary/yoji/○○○○`（四字熟語辞典の該当エントリページ）

---

## 作業手順

### ステップ1: テーマ1（四字熟語力診断）のデータファイル作成
- ファイル: `src/lib/quiz/data/yoji-level.ts`
- 上記設計に従い、QuizDefinition型に準拠したデータを作成
- 10問の問題、各4択の選択肢（isCorrect指定）、explanation付き
- 5段階の結果パターン（minScore指定）

### ステップ2: テーマ2（四字熟語性格診断）のデータファイル作成
- ファイル: `src/lib/quiz/data/yoji-personality.ts`
- 上記設計に従い、QuizDefinition型に準拠したデータを作成
- 8問の質問、各4択の選択肢（points指定）
- 8種の結果パターン（color, icon指定）

### ステップ3: レジストリ登録
- `src/lib/quiz/registry.ts` に2行追加:
  - import文: `import yojiLevelQuiz from "./data/yoji-level";`
  - import文: `import yojiPersonalityQuiz from "./data/yoji-personality";`
  - quizEntries配列に両テーマを追加

### ステップ4: テスト実行・検証
- `npm run test` で既存のregistry.test.tsが自動的に新テーマを検証
- データ整合性（questionCount一致、ID一意性、型制約）が自動チェックされる
- 手動テストは不要（共通基盤の自動テストが網羅）

### ステップ5: ビルド確認
- `npm run build` で静的生成が正常に動作することを確認
- 新テーマのOGP画像、結果ページが生成されていることを確認

---

## 完成基準

1. 2つの新テーマが `/quiz` 一覧ページに表示される
2. `/quiz/yoji-level` で四字熟語力診断が正常にプレイ・結果表示される
3. `/quiz/yoji-personality` で四字熟語性格診断が正常にプレイ・結果表示される
4. 全結果パターンの共有URL（`/quiz/[slug]/result/[resultId]`）が正常に表示される
5. OGP画像が全ページで正常に生成される
6. 既存テスト（registry.test.ts）がすべてパスする
7. relatedLinksから四字熟語辞典、四字キメルへの遷移が正常
8. `npm run build` が成功する

## 注意点

1. **誤答選択肢の品質**: 誤答は「もっともらしい」ものを選ぶ。同カテゴリの四字熟語や字面が似たものを配置し、単純な消去法で解けないようにする
2. **personality型のポイントバランス**: 8結果に均等にポイントが行き渡るよう設計する。特定の結果に偏らないよう、各結果IDの総獲得可能ポイントを計算して確認すること
3. **結果IDのURL安全性**: 結果IDはURLパスの一部になるため、半角英数字とハイフンのみを使用する
4. **accentColorの視認性**: OGP画像の背景色として使われるため、白文字が読みやすい十分に濃い色を選ぶ（上記設計で考慮済み）
5. **四字熟語辞典のリンク先確認**: recommendationLinkのパスが実際に存在するページを指しているか確認する。`/dictionary/yoji` が辞典トップ、`/dictionary/yoji/一期一会` のようなエントリページが存在するか確認が必要
6. **既存テーマとの一貫性**: icon、結果パターン数、説明文のトーンを既存テーマと揃える
7. **データファイルの品質**: explanationやdescriptionは正確な日本語で、誤字脱字がないよう注意する


