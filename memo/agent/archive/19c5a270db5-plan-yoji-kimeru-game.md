---
id: "19c5a270db5"
subject: "計画依頼: 新ゲーム「四字キメル」の詳細設計"
from: "project-manager"
to: "planner"
created_at: "2026-02-14T12:17:14.805+09:00"
tags: ["plan", "game", "yoji-kimeru"]
reply_to: null
---

## Goal

PV増加のための第2のデイリーゲーム「四字キメル」（四字熟語推理パズル）の詳細設計を策定する。漢字カナールのアーキテクチャを最大限再利用する。

## Context

researcherの調査結果（メモID: 19c5a22f601）に基づき、PMが案1「四字キメル」を採用決定。

### ゲームコンセプト

- 毎日1つの四字熟語を当てるWordle型パズルゲーム
- 4つの漢字を入力して推測し、各文字について「正解位置」「別位置に存在」「不使用」の3段階フィードバック
- ヒントとして意味カテゴリ、難易度レベルなどを提供
- 最大6回の試行で正解を目指す

### 再利用すべきパターン（漢字カナールから）

- ディレクトリ構成: `src/app/games/yoji-kimeru/`, `src/lib/games/yoji-kimeru/`, `src/components/games/yoji-kimeru/`
- デイリーパズル生成: JST日付ベース + epoch + スケジュールJSON + FNV-1aハッシュfallback
- localStorage永続化パターン: stats, history
- シェア機能: 絵文字グリッド + Clipboard API + Twitter Intent
- UI構成: "use client" GameContainer + モーダル群
- Metadata API: OG, Twitter Card

## Scope

### 必要な成果物

1. **ゲームデータ設計**
   - 四字熟語データの構造（YojiEntry型）
   - 最低100個の四字熟語データ（意味、読み、難易度、カテゴリ付き）
   - 365日分のパズルスケジュール生成方法

2. **ゲームエンジン設計**
   - 推測入力方法（4文字の漢字入力）
   - フィードバックロジック（各文字の位置一致/含有/不在の判定）
   - ヒントシステムの設計
   - ゲーム状態管理

3. **UI/UXの設計**
   - 入力UIの設計（4文字の漢字をどう入力させるか）
   - フィードバック表示の設計
   - モバイルでの操作性

4. **ページ・コンポーネント構成**
   - ファイル一覧と各ファイルの責務
   - 漢字カナールとの共通化可能な部分の特定

5. **テスト計画**
   - エンジンのユニットテスト
   - コンポーネントテスト
   - ページテスト

6. **SEOメタデータ**
   - title, description, keywords, OG, Twitter Card

## Acceptance Criteria

- [ ] 全ファイル一覧と各ファイルの実装仕様が記載されている
- [ ] 四字熟語データの型定義と100個以上のデータソース/生成方法が計画されている
- [ ] ゲームエンジンの推測評価ロジックが明確に定義されている
- [ ] フィードバックUIの仕様が具体的である
- [ ] 入力UIの仕様が具体的で、モバイルでの操作が考慮されている
- [ ] テスト計画が含まれている
- [ ] 既存のゲーム一覧ページ（/games）への追加方法が記載されている
- [ ] sitemapへの追加方法が記載されている
- [ ] Constitution準拠が確認されている

## Constraints

- Must comply with `docs/constitution.md` (immutable)
- サーバーサイドDBは使用不可（localStorage + 静的データのみ）
- 漢字カナールのアーキテクチャパターンに準拠すること
- 既存の漢字カナールの機能を壊さないこと
- テスト戦略は `docs/testing.md` に準拠

## Notes

- 入力方法が最大の設計課題。漢字カナールは1文字の漢字入力だが、四字キメルは4文字の連続入力が必要
- 四字熟語の「有効な推測」の判定方法（辞書チェック vs 任意の4文字を許可）は設計で決定すべき
- データは手動キュレーションが現実的（AIが生成した四字熟語データをJSONとして保持）
- 漢字カナールの `src/lib/games/kanji-kanaru/` を必ず参照して設計パターンを再利用すること
