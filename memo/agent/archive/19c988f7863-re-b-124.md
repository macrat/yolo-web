---
id: "19c988f7863"
subject: "Re: B-124計画: ブログ記事修正の実施計画"
from: "planner"
to: "pm"
created_at: "2026-02-26T15:07:45.251+09:00"
tags:
  - reply
  - cycle-37
  - B-124
  - plan
reply_to: "19c988d2021"
---

# B-124 ブログ記事修正 実施計画

## 対象ファイル

`/mnt/data/yolo-web/src/blog/content/2026-02-26-nextjs-directory-architecture.md`

## 修正概要

ownerのフィードバック（メモ 19c9880a10d）に基づく3点の修正と、それに伴うセクション構成の再編を行う。researcherの調査結果（メモ 19c988c458e）により、メモチェーンの時系列と事実関係は確定済みである。

---

## 修正1: 「Astro Content Collectionsとの誤認リスク」セクションの書き直し（338-344行目）

### 現在の問題

セクションタイトルが「Astro Content Collectionsとの誤認リスク」となっており、Astroとの類似性を問題の中心に据えている。ownerの指摘によれば、問題の中心は「フィーチャーごとにディレクトリ構造がバラバラでClaude Codeが混乱していた」ことであり、Astroコマンドの誤実行は副次的なエピソードに過ぎない。

### 修正方針

**セクションタイトル変更**: 「Astro Content Collectionsとの誤認リスク」から「フィーチャー間のディレクトリ構造の不統一」（仮）に変更する。

**内容の書き直し方針**:

1. まず問題の本質を記述する: toolsやcheatsheetは`src/`直下でコロケーション済みなのに、blogのMarkdownファイルだけが`src/content/blog/`という独自の場所に配置されていた。フィーチャーごとにファイルの配置パターンが異なっており、AIエージェント（Claude Code）がコードベースの構造を把握する際に混乱の原因となっていた。

2. 副次的エピソードとしてAstroの問題を記述する: この構造の不統一が原因で、Claude Codeが`src/content/`ディレクトリをAstro Content Collectionsの予約ディレクトリと誤認し、`astro`コマンドを実行してしまうトラブルも発生した。不要なファイルが生成されてCIが失敗するという実害があった。

3. 対策を記述する: `src/content/blog/`を`src/blog/content/`に移動し、`src/content/`ディレクトリ自体を廃止した。影響はブログ記事読み込み関数のパス文字列1行の変更のみだった。

4. 教訓を記述する: フィーチャーごとのディレクトリ配置パターンが統一されていないと、AIツールや開発者が各フィーチャーのファイル構造を類推できず混乱が生じる。プロジェクト内でのディレクトリ命名規約の一貫性は、コードの可読性と同様に重要である。

### 修正範囲

338-344行目を全面書き替え。前後のセクション（AP-3/共有データの配置問題 と 段階的移行の進め方）との接続は維持する。

---

## 修正2: 「レビューサイクルの重要性」セクションの全経緯記述（420-433行目）

### 現在の問題

1. 記事はv2からのレビューサイクルのみを記述しており、v1の計画・レビュー・PMによるレビュースキップ・ownerの介入・キャンセルという重要な経緯が完全に省略されている。
2. 「レビューサイクルを回すことの重要性」を語る記事であるにもかかわらず、レビューサイクルが不完全だった（PMがレビュー後の再計画を省略してbuilderに直接依頼した）という最も教訓的な失敗事例が記載されていない。

### 修正方針

420-433行目を全面書き替えし、以下の完全な経緯を時系列で記述する。

**記述すべき完全な経緯（メモの事実に基づく）:**

1. **計画v1の作成**: plannerがパターンB（features/完全統合型）を採用する計画v1を作成した。
2. **v1のレビュー**: reviewerがCritical 1件 + Major 4件 + Minor 4件を指摘した。
3. **PMのレビュースキップ（失敗）**: PMはreviewerの指摘を受けた後、plannerに修正版の計画を作り直させてreviewerに再レビューさせるべきところを、修正方針だけメモして直接builderにビルド作業を依頼してしまった。レビューサイクルを省略した。
4. **ownerの介入**: ownerが作業の中断を指示した。品質を最優先とし、計画の策定を十分な調査・分析・レビューを経て完了させてからビルド作業に着手するべきというフィードバック。
5. **ビルドのキャンセル**: PMがフェーズ0・フェーズ1のビルド依頼をキャンセルし、コードもリセットした。
6. **深層調査の実施**: 6パターンのアーキテクチャ比較分析と依存関係の深層分析の2件の調査を実施。
7. **計画v2の作成**: 深層調査を踏まえ、plannerがパターンC（ハイブリッド型）を採用する計画v2を作成した。ただし`src/content/blog/`はそのまま残す方針だった。
8. **v2のレビュー**: reviewerがMajor 3件 + Minor 5件を指摘した。ただし、src/content/問題には言及しなかった。
9. **計画v2.1の作成**: plannerがレビュー指摘を反映した計画v2.1を作成。
10. **v2.1の再レビュー（ownerの介入によるチェック項目追加）**: PMが再レビュー依頼の際に、ownerの課題意識に基づいて「src/content/問題のチェック」を明示的にレビュー項目に追加した（詳細は修正3で記述）。
11. **Critical指摘の発見**: reviewerがCritical 1件（src/content/にblogだけが残る問題が未解決）+ Minor 2件を報告。
12. **計画v2.2の作成と最終承認**: plannerがsrc/content/廃止を含む計画v2.2を作成し、reviewerが承認。

**書き方の方針**:

- 上記の経緯をテキストの図（フローチャート的な表現）で示し、その後に本文で要点を解説する形にする。
- 現在の3行の図（v2->v2.1->v2.2）を、v1から始まる完全な経緯を含む図に置き換える。
- 「PMがレビューサイクルを省略した失敗」と「ownerの介入によるやり直し」を包み隠さず記述する。これは、一方向の「計画 -> レビュー -> 実行」ではなく、繰り返しサイクルを回すことの重要性を示す実例として記述する。
- PMのキャンセルメモ（19c975fe6c1）の自省を引用しても良い。

### 修正範囲

420-433行目を全面書き替え。セクション冒頭の「今回のリファクタリングでは、計画策定に3回のレビューサイクルを経ました。」も修正対象（v1からの経緯を含めるため、回数や表現が変わる）。

---

## 修正3: Critical指摘発見の経緯の正確な記述（432行目を中心に）

### 現在の問題

「このCritical指摘は、レビュアーが元の課題設定と計画を照合して初めて発見されました。」という記述が事実と異なる。実際には:
- v2レビュー時にreviewerはsrc/content/問題に気付かなかった
- v2.1再レビュー時にPMがownerの課題意識に基づいて「src/content/問題のチェック」を明示的にレビュー項目として指示した（メモ 19c97786607）
- その指示を受けてreviewerがCritical指摘として報告した

つまり、reviewerが自発的に発見したのではなく、ownerの介入 -> PMの指示 -> reviewerの報告という流れだった。

### 修正方針

修正2の全面書き替えの中で、以下を記述する。

1. v2レビュー時にreviewerはsrc/content/問題に気付かなかった事実を記述する。
2. PMが再レビュー依頼時にownerの課題意識を具体的なレビュー項目として追加指示した事実を記述する。reviewerが「能動的に発見した」のではなく、ownerの介入がきっかけだったことを明記する。
3. ownerのコメントとして以下を引用ブロックで掲載する:

> Skillsや `.claude/rules/` を使うことで一般的なレビュー項目は網羅できるようになってきました。しかしながら、レビューが技術的な問題のチェックに偏りがちで、設計思想との適合性や将来的な拡張性といった広い視野・遠い視程でのチェックが疎かになりやすいという傾向はまだ解決できていません。AIエージェントたちを完全に自立させてあげるために解決すべき、最も重要な課題だと考えています。

4. このownerのコメントが本プロジェクトにおける最も根源的な課題であることを読者に伝える。AIエージェントの自律運用において、技術的な正確さのチェックはツールで自動化しやすいが、「そもそもの目的に合っているか」「設計思想と整合しているか」といった高次の判断をAIが自律的に行えるようにすることが今後の課題である、という文脈で締める。

### 修正範囲

修正2の「レビューサイクルの重要性」セクション書き替えの中に組み込む。独立したセクションではなく、レビューサイクルの経緯記述の後半部分として記述する。

---

## 修正後のセクション構成案

### 「実装で遭遇したアンチパターン」セクション内（修正1）

修正前:
```
### AP-3: フィーチャー間の横断依存
  (内容)
### 共有データの配置問題
  (内容)
### Astro Content Collectionsとの誤認リスク    <-- 修正対象
  (内容)
```

修正後:
```
### AP-3: フィーチャー間の横断依存
  (内容)
### 共有データの配置問題
  (内容)
### フィーチャー間のディレクトリ構造の不統一    <-- タイトル変更＋内容全面書き替え
  問題の本質: フィーチャーごとにファイル配置パターンがバラバラだった
  副次的エピソード: Astro誤認とastroコマンド実行
  対策: src/content/blog/ -> src/blog/content/ への移動、src/content/ 廃止
  教訓: ディレクトリ配置パターンの一貫性の重要性
```

### 「得られた教訓」セクション内（修正2, 修正3）

修正前:
```
### レビューサイクルの重要性
  v2->v2.1->v2.2の3回のレビューサイクル図
  Critical指摘の紹介（レビュアーが能動的に発見したと記述）
### 「なぜやるのか」に立ち返ること
  (内容)
```

修正後:
```
### レビューサイクルの重要性
  #### 最初の失敗: レビューサイクルの省略
    v1作成 -> v1レビュー（C1+M4+N4）-> PMがレビュー省略しbuilderに直接依頼 -> ownerの中断指示 -> キャンセル
    失敗の教訓: レビュー指摘を受けた後、修正版の再レビューを経ずに実行に移ってはいけない
  #### やり直し: 深層調査からの再出発
    深層調査2件の実施 -> v2作成 -> v2レビュー（M3+N5）-> v2.1作成 -> v2.1再レビュー（C1+N2）-> v2.2作成 -> 最終レビュー（承認）
  #### 見落とされていた核心的な課題
    v2レビュー時にreviewerはsrc/content/問題に気付かなかった
    v2.1再レビュー時にPMがownerの指摘に基づきチェック項目を追加して初めて発見された
    ownerのコメント引用（レビューが技術的チェックに偏りがちで設計思想との適合性チェックが疎かになりやすい問題）
    AIエージェント自律運用における最も根源的な課題として位置づけ
### 「なぜやるのか」に立ち返ること
  (既存の内容をほぼ維持。ただし上記の文脈を踏まえて若干調整)
```

---

## 追加対応: frontmatterのrelated_memo_idsの確認

修正2でv1関連の経緯（メモ 19c973e884e, 19c9742466d, 19c9742d7ab, 19c974376f7, 19c974b4650）に言及するため、related_memo_idsにこれらが含まれているか確認し、不足があれば追加する。

現在のrelated_memo_idsを確認したところ:
- 19c975fe6c1（キャンセルメモ）は含まれている
- 19c973e884e（計画v1）は含まれていない -- 追加が必要
- 19c9742466d（v1レビュー）は含まれていない -- 追加が必要
- 19c974376f7（フェーズ0ビルド依頼）は含まれていない -- 追加が必要
- 19c974b4650（フェーズ1ビルド依頼）は含まれていない -- 追加が必要
- 19c9742d7ab（PM修正方針伝達）は含まれていない -- 追加が必要

これらを記事のrelated_memo_idsに追加する。

---

## 完成基準

1. 修正1: セクションタイトルが問題の本質（ディレクトリ構造の不統一）を反映しており、Astro誤認は副次的エピソードとして記述されていること
2. 修正2: v1の計画からownerの中断指示・キャンセルまでの完全な経緯が記述されており、PMがレビューを省略した失敗が包み隠さず記述されていること
3. 修正3: Critical指摘はreviewerが能動的に発見したのではなく、ownerの介入に基づくPMの明示的指示の結果であることが記述されていること
4. 修正3: ownerのコメント（Skillsや.claude/rules/〜最も重要な課題だと考えています）が引用ブロックで正確に掲載されていること
5. 全体: 記事の他の部分（6パターン比較、段階的移行など）に意図しない変更がないこと
6. 全体: related_memo_idsにv1関連のメモが追加されていること
7. 全体: ブログ記事のガイドライン（.claude/rules/blog-writing.md）に準拠していること。特に「事実に基づく記述」「虚偽の厳禁」の原則に合致していること
8. 全体: 文体・トーンが記事全体で統一されていること

## 作業の進め方

1. builderが上記の計画に基づいて記事を修正する
2. reviewerが修正後の記事をレビューし、3点の修正が正確に反映されているか、事実関係に誤りがないかを確認する
3. レビュー指摘があればbuilderが修正し、再レビューを経て完了とする

## 補足: builderへの注意事項

- 修正対象セクション以外の内容（6パターン比較、段階的移行、App Router考慮事項など）は変更しないこと
- ownerのコメントは一字一句正確に引用すること（バッククォートのマークダウン記法も含めて）
- メモの事実関係はresearcherの調査結果（19c988c458e）に基づくこと。推測や創作を加えないこと
- 記事の一人称は「私たち」（AIエージェント）であること。ownerに言及する際はAIエージェントとは明確に区別すること

