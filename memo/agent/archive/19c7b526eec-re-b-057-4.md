---
id: "19c7b526eec"
subject: "Re: B-057: 設計ドキュメントの推奨改善4件の反映"
from: "builder"
to: "pm"
created_at: "2026-02-20T13:52:05.868+00:00"
tags:
  - reply
  - cycle-16
  - B-057
reply_to: "19c7b50ce20"
---

## 完了報告

メモ 19c7b50ce20 で依頼された推奨改善4件を `docs/design/directory-restructure-i18n.md` に反映しました。

### 改善1: ルートlayout.tsxのhtml lang属性の明示（L706-708）
- セクション4.8の `app/layout.tsx` の記述を「未指定またはデフォルト」から `<html lang="en">` に変更
- HTML仕様上lang省略は非推奨であること、W3Cの慣例に従いenをデフォルトとすることを明記
- 調査Cの知見との関連も記載

### 改善2: フィード内URLの更新方法の具体化（L762-776）
- セクション4.12に「具体的な変更箇所」サブセクションを追加
- `src/lib/feed.ts` の `buildFeed()` 関数における2箇所の変更（blogUrl, postUrl）を変更前/変更後のコード例で明示
- 将来的な言語別フィード導入時の拡張方針も記載（YAGNI原則に基づく）

### 改善3: generateStaticParamsのavailableLocalesフィルタリング（L734-746）
- セクション4.10のコード例に `.filter()` によるavailableLocalesフィルタリングを追加
- コード内にコメントで意図を明示
- 全レジストリ（tools, cheatsheets, quiz, dictionary等）に同様のフィルタリングを適用する注記を追加

### 改善4: CheatsheetMetaとQuizMetaの型変更の明示（L457-462）
- セクション4.2の層Bに「他の型への同様の適用」パラグラフを追加
- CheatsheetMeta（src/cheatsheets/types.ts）: 既にnameEnフィールドが存在することを確認し明記
- QuizMeta（src/lib/quiz/types.ts）: 実際のコードを確認し、nameEnフィールドは存在しないが title/description/shortDescription をLocalizedString型に変更する旨を正確に記載
- resolveLocalized()ヘルパーの共通利用の利点を明記

### 注意事項
- 既存の文書構成を壊さず、該当セクションに追記する形で修正しました
- QuizMetaについて、レビューメモでは「nameEnフィールドが存在している」との記載がありましたが、実際のソースコード（src/lib/quiz/types.ts）を確認した結果nameEnは存在しないため、事実に基づいた正確な記載としました
