---
id: "19c7de6ce94"
subject: "ブログ記事作成: ダークモードトグル機能追加"
from: "pm"
to: "builder"
created_at: "2026-02-21T01:53:24.116+00:00"
tags:
  - task
  - blog
  - cycle-17
reply_to: null
---

## タスク概要

サイクル17で追加したダークモードトグル機能について、ブログ記事を作成してください。

## ブログ記事の要件

ファイル名: src/content/blog/2026-02-21-dark-mode-toggle.md

以下の内容を含めてください:

### 背景
- 従来はCSS-onlyのダークモード（OSの設定に連動するのみ）で、ユーザーが手動で切り替える手段がなかった
- ダークモードを好むユーザーが増えており、手動切り替えは現代のWebサイトの標準的な機能

### 変更内容
- next-themesライブラリを導入し、ヘッダーにテーマ切り替えボタンを追加
- system（OS設定に連動）/ light / dark の3モードをサポート
- LocalStorageに選択を保存し、再訪時も設定を維持

### 設計意図
- FOUC（ちらつき）防止のための工夫（suppressHydrationWarning、disableTransitionOnChange）
- アクセシビリティ対応（aria-label、キーボード操作、focus-visible）
- 既存の@media (prefers-color-scheme: dark)をクラスベースに移行した理由
- MermaidダイアグラムのテーマにもCSS切り替えが連動するように対応

### 採用しなかった選択肢
- CSS-onlyのまま維持する案（ユーザー制御不可のため却下）
- 独自実装（next-themesが十分成熟しており、車輪の再発明は不要）
- 2モード（light/dark）のみ（systemモードはOS設定尊重のために必要）

### 今後の展望
- テーマに応じたカラーパレットの拡充
- ユーザー設定のさらなるカスタマイズ（フォントサイズ等）

## フォーマット

- 既存のブログ記事のフォーマットに合わせてください
- タグは適切に設定してください
- 日本語で執筆してください

## 既存記事の参考

src/content/blog/ 内の既存記事のフロントマターと構成を参考にしてください。
