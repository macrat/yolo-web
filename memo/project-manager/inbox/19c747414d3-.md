---
id: "19c747414d3"
subject: "作業手順の簡略化"
from: "owner"
to: "project-manager"
created_at: "2026-02-19T14:51:30.515+09:00"
tags: []
reply_to: null
---

owner宛てのメモを無断でアーカイブするルール違反が再発しました。コミット 856e698 で状況を確認できます。
PMが他ロールに宛てられたメモを直接アーカイブする行為はworkflow.mdで禁じられています。しかし、この事象は幾度か発生しています。

原因はおそらく2つあると考えています。1つは、ルールが複雑化しすぎており追従しきれていないこと。もう1つは、workflow.mdを必ず読むという手順になっていないことです。
また、多数のエージェントをサブエージェントで実行する方式にも無理があるのかもしれません。

そこで、ワークフローを大幅に変更し、より確実に実行できるようにしたいと思います。基本的な考え方は以下の通りです。

1. シンプルで実効性のあるワークフローにする。
2. Claude Codeの機能 ([custom sub-agents](https://code.claude.com/docs/en/sub-agents)や[skills](https://code.claude.com/docs/en/skills)など) を最大限に活用し、 docs/ 配下のファイルを読むのではなくClaude Codeのコンテキストにうまく載せる設計を目指す。
3. main agentとsub agentsの権限設定を厳格にし、越権行為ができないようにする。とくに、レビューは絶対に通過させる仕組みを確保する。
4. メモシステムのような仕組みによる実行履歴の記録は維持する。しかし、現状のようなロールごとのinboxにはこだわらない。作業の履歴や途中で検討したことがすべて残っていればそれで良い。

私が今考えているのは、以下のようなワークフローです。

- **サイクルの強化**
  - 「サイクル」という概念をより厳格にして、1サイクルにつき1つのドキュメントを作るようにする。
  - サイクルドキュメントはテンプレートをコピーする形で作成させる。
  - テンプレートに開始時・完了時のチェックリストを含めることで、各サイクルで行うべき作業を明確にする。
- **メモ管理の簡略化**
  - ロールベースのメモ管理をやめて、「agent」と「owner」の2つのinboxに統合する。「agent」はすべてのエージェントが共有する。
  - サブエージェントを起動するとき、どのメモを担当させるかを指示する。サブエージェントはそのメモ以外には触れない。
  - メインエージェントは「agent」ディレクトリ内のすべてのメモを操作できるルールにする。
  - memoスクリプトを改善し、Claude Code内から呼び出されたことを環境変数で検知した場合は、owner宛てのメモに対するmark操作を拒否するようにする。
- **5つのロールの廃止とエージェント・スキルの充実**
  - 現状用意している5つのロールはすべて廃止する。
  - 代わりに、.claude/agents/ディレクトリに、より専門的な多数のエージェントを用意する。メインエージェントは、これらのサブエージェントから任意のものを選んで実行する。
- **ドキュメントの整理とスキル化**
  - docs/ 配下にある情報は、可能な限り .claude/skills/ ディレクトリに移動してスキルとする。
  - さらに、ブログ記事をレビューするスキル、新規コンテンツを考えるスキル、など、さまざまなスキルを充実させる。
  - ownerから改善指示を受けたときは、それに応じて既存のsub-agentやSkillを改善したり、新たなsub-agentまたはSKillを作って対応するルールにする。
  - CLAUDE.md は非常にシンプルで分かりやすい内容にする。伝えるべきことは、1) constitution.mdに絶対に従うこと、2) Sub-agentとSkillをフル活用しながら作業を進めること、3) すべての判断や作業はメモとして残すこと(報告事項はowner宛て、途中経過はagentからagent宛て)、の3点のみ。

上記の案をよく検討し、具体的な実装プランに落とし込んでください。重要な変更なので、着手するまえに一度ownerに報告して承認を受けてください。
検討にあたっては、Claude Codeやその他のAIツールでエージェントチームを作って自律的に動作させている事例の記事などもよく調べて、一般的なベストプラクティスを加味してください。
