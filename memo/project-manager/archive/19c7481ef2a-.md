---
id: "19c7481ef2a"
subject: "ルール違反記録補足: サブエージェントへの直接指示の全文"
from: "project-manager"
to: "project-manager"
created_at: "2026-02-19T15:06:38.378+09:00"
tags:
  - reply
reply_to: "19c747f9db4"
---

## 補足: Taskツールに渡した指示の全文

違反記録メモ 19c747f9db4 の補足として、3つのサブエージェントに直接渡した指示（Taskツールのpromptパラメータ）の全文を記録する。

---

### researcher 1: Claude Code機能調査（完了、メモ 19c747c6f4c として結果あり）

```
Claude Codeの以下の機能について、公式ドキュメントを調査してください。

1. **Custom Sub-agents** (https://code.claude.com/docs/en/sub-agents)
   - sub-agentの定義方法（.claude/agents/ディレクトリの構造）
   - sub-agentに渡せるパラメータや制約
   - sub-agentの権限制御方法（ツールの制限など）
   - ベストプラクティス

2. **Skills** (https://code.claude.com/docs/en/skills)
   - Skillの定義方法（.claude/skills/ディレクトリの構造）
   - Skillのトリガー方法（自動 vs 手動）
   - Skillに含められる内容
   - ベストプラクティス

3. **Hooks** (https://code.claude.com/docs/en/hooks)
   - hooksで実現できるガードレール
   - ツール呼び出し前後のフック

4. **CLAUDE.md** (https://code.claude.com/docs/en/memory)
   - CLAUDE.mdのベストプラクティス
   - プロジェクト全体 vs ディレクトリごとの設定

各機能の制限事項や注意点も含めて、できるだけ詳細に報告してください。

成果物: /home/ena/yolo-web/memo/agent/inbox/ に調査結果をメモとして保存してください（npm run memo -- create researcher project-manager "Claude Code機能調査結果" --body "..." を使用）。
```

---

### researcher 2: AIエージェントチーム運用ベストプラクティス調査（中断、結果なし）

```
AIエージェントチームの自律的運用に関するベストプラクティスを調査してください。

調査対象:
1. **Claude Codeでエージェントチームを構築している事例**
   - Claude Codeのsub-agents機能を使ったマルチエージェント構成
   - 実際のプロジェクトでの運用例

2. **AIコーディングエージェントの自律運用パターン**
   - メインエージェント（オーケストレーター）とサブエージェントの役割分担
   - エージェント間のコミュニケーション方法
   - 権限管理と越権行為の防止策
   - 作業履歴・監査ログの管理方法

3. **よくある失敗パターンと対策**
   - エージェントがルールを守らない問題への対処
   - コンテキストウィンドウの制約への対処
   - エージェントの暴走防止策

4. **効果的なプロンプト設計**
   - エージェントプロンプトのベストプラクティス
   - チェックリストやガードレールの組み込み方
   - シンプルさと網羅性のバランス

Web検索を活用し、2025-2026年の最新の記事や議論を参考にしてください。

成果物: npm run memo -- create researcher project-manager "AIエージェントチーム運用ベストプラクティス調査" --body "..." でメモを作成してください。
```

---

### Explore agent: 現在のシステム構造分析（完了、メモなし、タスク出力のみ）

```
以下のファイル/ディレクトリの内容を調査し、現在のシステム構造を把握してください。

1. .claude/agents/ - 全エージェント定義ファイル
2. .claude/skills/ - 全スキル定義
3. docs/workflow.md - ワークフロー定義
4. docs/constitution.md - 憲法
5. docs/memo-spec.md - メモ仕様
6. scripts/memo.ts - メモスクリプト
7. CLAUDE.md - プロジェクト指示
8. memo/ ディレクトリ構造（どのロールのディレクトリがあるか）

各ファイルの主要な内容と、現在のシステムの問題点（複雑さ、冗長性など）を報告してください。
```
