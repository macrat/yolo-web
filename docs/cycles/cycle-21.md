---
id: 21
description: ownerからのバグ報告に基づくUI・UXバグ修正一括対応（ブログ目次、ゲームダイアログ、トップページ、免責表示）
started_at: 2026-02-21T17:30:00+09:00
completed_at: 2026-02-21T19:10:00+09:00
---

# サイクル-21

このサイクルでは、ownerから報告されたバグ・改善点（メモ 19c7f25a645）を一括修正しました。ブログの目次機能、ゲームダイアログの表示位置、トップページの古い情報と非クリック要素、AI免責表示の重複など、ユーザー体験に直接影響する問題を修正し、サイト全体の品質を向上させました。

## 実施する作業

- [x] B-061: ブログ目次・関連メモのバグ修正
  - 目次クリックで該当セクションにジャンプするよう修正（markedカスタムheadingレンダラーでID付与）
  - 重複する見出しIDへの対応（連番サフィックス `-1`, `-2` 追加）
  - 関連メモで未定義のfrom/toが「Owner」と表示される問題を修正（normalizeRoleに"pm","agent-lead"追加）
  - テスト: markdown.test.ts (15テスト追加), memos.test.ts (11テスト新規)
- [x] B-062: ゲーム説明ダイアログの表示位置修正
  - globals.cssに `dialog { margin: auto; }` 追加で全12ダイアログの中央表示を修正
  - getBoundingClientRectによるバックドロップクリックでダイアログを閉じる機能追加
  - kanji-kanaru, yoji-kimeruのaria-labelledby IDにプレフィックス追加（ID一意性確保）
  - テスト: globals-css-dialog.test.ts (1テスト新規)
- [x] B-063: トップページのコンテンツ更新とUI修正
  - DAILY_GAMESにイロドリ追加、バッジを動的生成（allToolMetas.length等で自動算出）
  - バッジを`<span>`から`<Link>`に変更し各セクションへのナビゲーション対応
  - ゲームグリッドをrepeat(auto-fit, minmax(220px, 1fr))でレスポンシブ化
  - フッターにイロドリ追加、コンテンツセクション新設（クイズ・チートシート・辞典・ブログ）
  - テスト: page.test.tsx (バッジLink化テスト、動的カウントテスト追加)
- [x] B-064: AI免責表示の重複・レイアウト修正
  - AiDisclaimerコンポーネント（common版+tools版）を完全削除、フッター免責テキストに統一
  - 16ファイルからAiDisclaimer使用箇所削除
  - フッター免責表示を警告スタイルに強化（背景色・ボーダー追加）
  - テスト: Footer.test.tsx新規、section-layouts.test.tsにAiDisclaimer再混入防止ガード追加

## レビュー結果

### 計画レビュー（4件並行）

各バグについて個別にresearcher→planner→reviewerの流れで計画をレビュー。

- B-061計画レビュー (19c7f62f81b): 承認（軽微な指摘あり）
- B-062計画レビュー (19c7f62f571): 条件付き承認（バックドロップクリックのpadding誤検出問題を指摘、getBoundingClientRect方式に変更）
- B-063計画レビュー (19c7f62a5c0): 承認（グリッドレイアウト4列→auto-fit推奨、+表記削除を指摘）
- B-064計画レビュー (19c7f6285bb): 承認（モバイル表示確認、再混入防止ガードスコープを指摘）

### 最終実装レビュー

- メモ: 19c7fa1c6ef
- 判定: 承認 (Approved)
- Minor指摘1件: section-layouts.test.tsのcollectTsxFiles関数でnode_modulesと**tests**のスキップロジックに矛盾 → 修正済み

## キャリーオーバー

- ブログ目次のsticky動作: CSSは正しく設定済み。ブラウザでの実機確認が必要（コード上の問題は確認されていない）
- ゲームモーダルのスクロールロック: showModal()がブラウザ側で制御しており実害小。別タスクとして検討可能
- ゲームモーダルのコード重複リファクタリング: 12個のダイアログで同じロジックが重複。別タスクとして検討可能
- extractHeadingsのインラインリンク記法strip: 既存問題。`[text](url)`を含む見出しのID生成改善
- ゲームデータの重複管理統一: 5箇所にハードコードで重複管理されており同期漏れリスク

## 補足事項

- ownerからのSNS最適化要望（メモ 19c7f32cd25）はB-065〜B-067としてバックログのQueuedに登録済み。次サイクル以降で対応予定。
- ChatGPTからのアドバイス（メモ 19c7f135782）はB-068としてバックログのQueuedに登録済み。
- ownerからのバグ報告に含まれていた「関連する機能にバグが無いかのチェック」も実施し、追加で発見されたバグ（重複見出しID、aria-labelledby非一意性、フッターリンク不足等）も修正済み。

## サイクル終了時のチェックリスト

- [x] 上記「実施する作業」に記載されたすべてのタスクに完了のチェックが入っている。
- [x] `/docs/backlog.md` のActiveセクションに未完了のタスクがない。
- [x] `npm run memo -- list --state inbox,active` を実行して、未処理のメモがない。
- [x] すべての変更がレビューされ、残存する指摘事項が無くなっている。
- [x] `npm run lint && npm run format:check && npm run test && npm run build` がすべて成功する。
- [x] 本ファイル冒頭のdescriptionがこのサイクルの内容を正確に反映している。
- [x] 本ファイル冒頭のcompleted_atがサイクル完了日時で更新されている。
- [x] 作業中に見つけたすべての問題点や改善点が「キャリーオーバー」および `docs/backlog.md` に記載されている。

上記のチェックリストをすべて満たしたら、チェックを入れてから `/cycle-completion` スキルを実行してサイクルを完了させてください。
なお、「環境起因」「今回の変更と無関係」「既知の問題」「次回対応」などの **例外は一切認めません** 。必ずすべての項目を完全に満してください。
