# コンテンツ品質要件定義

## 概要と目的

yolos.net のコンテンツは、訪問者が「すぐに価値を理解でき、使いこなせ、次の行動に移れる」状態を最低品質ラインとする。

本ドキュメントは、全コンテンツ種別に共通する **4つの品質要素** を定義し、各要素の基準・実装方針を明文化するものである。以下を目的とする。

- **離脱防止**: 訪問者がコンテンツの価値を即座に理解でき、「自分に必要なものだ」と判断できる
- **回遊促進**: 関連コンテンツへの導線が常に用意され、次の行動に自然に誘導される
- **量産時の品質担保**: 今後のコンテンツ追加（B-086 等）において、この基準を満たすことを前提とする

本ドキュメントは constitution Rule 4（品質優先）を具体的な実装レベルで実践するためのガイドラインである。

---

## 4つの品質要素

### 1. 一行価値（valueProposition）

**定義**: 「誰の・何を・どう解決するか」を 40 字以内で表現するテキスト。

訪問者がページを開いた瞬間に「このコンテンツは自分に役立つ」と判断できる情報を提供する。検索結果からの流入時、description だけでは伝わらない具体的な価値を補完する役割を持つ。

#### 基準

- 40 字以内（日本語）を推奨。短く明確であるほどよい
- 「誰が」は省略可能（ターゲットが自明な場合）
- 「何を」「どう」は必須。具体的な動作や結果を含める
- 抽象的な表現（「便利です」「役立ちます」）は避ける

#### 例

| コンテンツ           | valueProposition                                                |
| -------------------- | --------------------------------------------------------------- |
| 文字数カウント       | テキストをペーストするだけで文字数・バイト数・行数を即座に確認  |
| JSON 整形・検証      | コピペするだけで JSON の整形・圧縮・エラー検出ができる          |
| Git チートシート     | よく使う Git コマンドを用途別に整理。コマンドをすぐ見つけられる |
| 正規表現チートシート | 正規表現パターンをすぐ引き出せる。実例付きで意味がわかる        |

#### 型定義

```typescript
/** 「誰の・何を・どう解決するか」を表す一行テキスト（40字以内推奨） */
valueProposition?: string;
```

---

### 2. 具体例（usageExample）

**定義**: コンテンツの使い方を「入力 → 出力」または「使用シーン」で示すサンプル。

初めて訪問した人が「どう使えばいいか」を一目で理解できる情報を提供する。ツールの場合は入力と出力のペア、チートシートの場合は「こんなときに使う」という使用シーンの形式でもよい。

#### 基準

- ツール: `input`（入力例）と `output`（出力例）のペアを提供する
- チートシート: `input`（対象シーン/パターン）と `output`（結果/用途）のペアで表現する
- `description` は任意。補足説明が必要な場合のみ設定する
- 実際に動作する具体的な値を使う。プレースホルダーやダミーは避ける

#### 例

| コンテンツ           | input                    | output                                  | description      |
| -------------------- | ------------------------ | --------------------------------------- | ---------------- |
| 文字数カウント       | ありがとうございます     | 文字数: 9文字, バイト数: 27バイト       | -                |
| JSON 整形・検証      | `{"name":"yolos","v":1}` | 整形された JSON（インデント付き）       | 圧縮 JSON の整形 |
| 正規表現チートシート | `[0-9]+`                 | 電話番号 090-1234-5678 から数字のみ抽出 | -                |

#### 型定義

```typescript
interface UsageExample {
  /** 入力テキストまたは対象シーン */
  input: string;
  /** 出力テキストまたは結果 */
  output: string;
  /** 補足説明（任意） */
  description?: string;
}

/** 入力→出力の具体例 */
usageExample?: UsageExample;
```

---

### 3. FAQ

**定義**: Q&A 形式の 2〜5 問。訪問者が抱きやすい疑問に先回りして回答する。

離脱の主要な原因である「疑問が解消されない」を防ぐ。また、将来の B-024（FAQ 構造化データ）で JSON-LD（FAQPage schema）を付与することを前提に設計する。

#### 基準

- 2〜5 問を目安とする。1 問では FAQ として不十分、6 問以上は読みにくい
- question は訪問者の自然な疑問文にする（「〜とは？」「〜の違いは？」「〜するには？」）
- answer はテキストのみ。HTML や Markdown 等の特殊記法は使わない
- answer は簡潔かつ正確に。1〜3 文程度を目安とする
- コンテンツの信頼レベル（content-trust-levels.md）に応じた正確性を担保する

#### FAQ 設計の注意点（B-024 との整合性）

本フィールドは将来 B-024 で [FAQPage schema](https://schema.org/FAQPage) の JSON-LD を自動生成するためのデータソースとなる。以下の制約を守ること。

- `question` と `answer` はプレーンテキストで完結させる（JSON-LD の `text` プロパティにそのまま使える形式）
- `answer` に外部リンクや内部リンクを含めない（JSON-LD 生成時に別途対応する）
- 1 つの FAQ エントリが 1 つの質問と 1 つの回答に対応する（入れ子や複数回答は不可）

#### 例

**文字数カウント** の FAQ:

| question                            | answer                                                                                                        |
| ----------------------------------- | ------------------------------------------------------------------------------------------------------------- |
| ひらがな 1 文字は何バイト？         | UTF-8 では 3 バイトです。ASCII 文字（英数字・記号）は 1 バイト、絵文字は 4 バイトです。                       |
| Word の文字数と結果が違うのはなぜ？ | Word はスペースや改行の扱いが設定により異なります。このツールは入力テキストの全文字をそのままカウントします。 |
| 改行コードは文字数に含まれる？      | はい。改行コード（LF や CRLF）も 1 文字としてカウントされます。行数は改行の数に基づいて計算しています。       |

#### 型定義

```typescript
interface FaqEntry {
  /** 質問文 */
  question: string;
  /** 回答文（プレーンテキストのみ） */
  answer: string;
}

/**
 * Q&A 形式の FAQ。2〜5問。
 * 将来 B-024 で FAQPage schema の JSON-LD を生成するデータソースとなる。
 */
faq?: FaqEntry[];
```

---

### 4. 関連導線（relatedSlugs / relatedToolSlugs / relatedCheatsheetSlugs）

**定義**: ユーザーの次の行動を促すリンク。既存の `relatedSlugs`（ツール）や `relatedToolSlugs` / `relatedCheatsheetSlugs`（チートシート）の延長として機能する。

#### 基準

- 最低 1 件、最大 5 件を目安とする
- 関連性のある導線を選ぶ。同一カテゴリ・同一ユースケースのコンテンツを優先する
- ツールとチートシートの相互リンクを積極的に活用する

#### 現状の実装

関連導線は既存のフィールドで対応済みのため、新規フィールドの追加は不要。各 Layout コンポーネント（ToolLayout, CheatsheetLayout）が既にこれらのフィールドを元に関連コンテンツを表示している。

品質要件としては、新規コンテンツ追加時に必ず適切な関連導線を設定することを求める。

---

## 種別ごとの実装状況と対応方針

### ツール

| 品質要素 | 現状       | 対応方針                              |
| -------- | ---------- | ------------------------------------- |
| 一行価値 | **未実装** | ToolMeta に `valueProposition` を追加 |
| 具体例   | **未実装** | ToolMeta に `usageExample` を追加     |
| FAQ      | **未実装** | ToolMeta に `faq` を追加              |
| 関連導線 | 実装済み   | `relatedSlugs` で対応済み。維持する   |

ToolLayout.tsx に valueProposition、usageExample、FAQ の表示 UI を追加する。

### チートシート

| 品質要素 | 現状       | 対応方針                                                           |
| -------- | ---------- | ------------------------------------------------------------------ |
| 一行価値 | **未実装** | CheatsheetMeta に `valueProposition` を追加                        |
| 具体例   | **未実装** | CheatsheetMeta に `usageExample` を追加                            |
| FAQ      | **未実装** | CheatsheetMeta に `faq` を追加                                     |
| 関連導線 | 実装済み   | `relatedToolSlugs` / `relatedCheatsheetSlugs` で対応済み。維持する |

CheatsheetLayout.tsx に valueProposition、usageExample、FAQ の表示 UI を追加する。

### ゲーム（今サイクル対象外）

ゲームは page.tsx 内で個別に UI を実装しており、共通 Layout 層が存在しない。品質要素の追加には先に GameLayout の共通化が必要。別 backlog 項目として切り出す。

### 辞典（今サイクル対象外）

辞典も同様に、共通 Layout 層が薄い。別 backlog 項目として切り出す。

---

## optional フィールドポリシー

### 原則: 新フィールドはすべて optional

```typescript
// ToolMeta への追加例（すべて optional）
valueProposition?: string;
usageExample?: { input: string; output: string; description?: string };
faq?: Array<{ question: string; answer: string }>;
```

### 理由

- **既存コンテンツを壊さない**: 32 個のツール、3 個のチートシートの既存 meta.ts を即座に全件更新する必要がない
- **段階的な展開が可能**: サンプル数件で動作確認した後、次サイクル以降で全コンテンツに展開できる
- **Layout での条件付き表示**: フィールドが存在しない場合は何も表示しない。フィールドが存在する場合のみ UI を表示する

### 将来の検討

全コンテンツへの展開が完了した段階で、必須フィールドへの昇格を検討してもよい。ただし、全コンテンツの meta.ts に値が設定されていることを確認してから昇格する。

---

## Layout コンポーネントへの表示配置

### ToolLayout.tsx

```
Breadcrumb
Header（h1 / TrustLevelBadge / description）
  └ valueProposition（存在する場合のみ表示）
usageExample（存在する場合のみ表示）
Tool コンテンツ（children）
プライバシー注記
FAQ セクション（存在する場合のみ表示）
シェアボタン
関連ツール
関連ブログ記事
```

### CheatsheetLayout.tsx

```
Breadcrumb
Header（h1 / TrustLevelBadge / description）
  └ valueProposition（存在する場合のみ表示）
TableOfContents
チートシートコンテンツ（children）
usageExample（存在する場合のみ表示）
FAQ セクション（存在する場合のみ表示）
シェアボタン
関連ツール
関連チートシート
```

### FaqSection コンポーネント

FAQ の表示は ToolLayout と CheatsheetLayout の両方で使うため、`src/components/common/FaqSection.tsx` に共通コンポーネントとして配置する。

- props は `faq` 配列のみを受け取るシンプルな設計
- セマンティック HTML の `section[aria-label="FAQ"]` を使用する
- details/summary タグによるアコーディオン形式、またはシンプルな Q&A リスト形式
- CSS Modules でスタイルを管理する

---

## 更新履歴

| 日付       | 内容                                                                 |
| ---------- | -------------------------------------------------------------------- |
| 2026-02-28 | 初版作成。4品質要素の定義、種別ごとの対応方針、optional ポリシー策定 |
