---
name: cycle-completion
description: "サイクルの成果をownerに報告し、サイクルを完了させるための作業。サイクルで計画したタスクがすべて完了したら、必ずこのスキルを実行すること。"
---

# サイクル完了手順

> **実行主体**: このスキルは `project manager` が実行する。

サイクルの全タスクが完了したら、以下の手順を順番に実行してください。

## 1. 実装完了確認

すべてのチェックが通ることを確認してください。1つでも失敗した場合は、修正してから次に進んでください。

```bash
npm run typecheck
npm run lint
npm run format:check
npm test
npm run build
```

## 2. レビュー確認

### 2a. reviewer inbox/active の空チェック

reviewer の inbox および active にメモが残っていないことを確認してください。メモが残っている場合は、レビューが完了するまで中断してください。

```bash
npm run memo -- list --to reviewer --state inbox
npm run memo -- list --to reviewer --state active
```

### 2b. builder の完了報告確認

builder から project-manager 宛ての完了報告メモが存在することを確認してください。

```bash
npm run memo -- list --from builder --to project-manager --state all
```

### 2c. レビュー承認の確認

- 今回作業した内容について、reviewer からの承認メモが存在することを確認してください。
- 未対応の reviewer notes がないことを確認してください。
- reviewer から指摘事項がある場合は、すべて対応してから次に進んでください。

> **注記**: reviewer へレビュー依頼を転送する際は、1メモ1タスク原則を遵守すること。複数のレビュー対象がある場合は、個別のメモに分割して送信する。

## 3. ブログ記事確認

サイクルで新機能や新サービスを追加した場合、ブログ記事の作成は**必須**である。以下を確認してください。

- 新機能・新サービスの追加、またはコンテンツの大幅追加を行った場合、対応するブログ記事が作成されていること。作成されていない場合は、builder に作成を依頼してから次に進むこと。
- ブログ記事がビルドに含まれていることを確認する。
  ```bash
  npm run build
  ```
- ブログ記事の `draft` フロントマターが `false` になっていることを確認する。

## 4. バックログ更新

`/docs/backlog.md` を更新してください。

- サイクルで完了した項目を **Done** セクションに移動する。
- 古い完了項目を削除して、直近5サイクル分のみを残す。
- キャリーオーバー項目（未完了で次サイクルに持ち越す項目）があれば **Queued** セクションに移動する。
- 新たに発見されたタスクがあれば **Queued** または **Deferred** セクションに追加する。Deferredに追加する場合は、着手可能になる条件を明記すること。

## 5. ownerへの完了報告

owner宛てにサイクル完了報告メモを作成してください。
報告メモには以下の内容を含めてください。

- 完了したタスクの一覧
- 各タスクの成果物（作成・変更したファイル）
- テスト結果のサマリー（テスト数、ビルドページ数）
- レビュー結果のサマリー
- 未完了・キャリーオーバー項目があればその説明

報告メモは、サイクル開始報告メモへの返信という形で作成してください。

## 6. 最後のフォーマット

コミット前に、最終のフォーマットを行ってください。

```bash
npm run format
```

## 7. コミットとプッシュ

すべての変更をmainブランチにコミットしてプッシュしてください。
これにより、サイクルの成果がデプロイされます。
